---
- name: Set Node Hostname
  template:
    src: templates/etc_hostname.j2
    dest: "{{ etc_hostname_file }}"


- name: Refresh Node Hostname
  command:
    cmd: "hostname -F {{ etc_hostname_file }}"
  changed_when: false


- name: Deploy {{ etc_hosts_file }}
  template:
    src: templates/etc_hosts.j2
    dest: "{{ etc_hosts_file }}"


# Because of the nature of the current lab
# we really only want to run this once; so
# lets tag it
- name: Ensure latest packages are present
  package: name=* state=latest
  tags:
    - update_lab
    - never


- name: Install Required RPM Packages
  package:
    name  : "{{ item }}"
    state : present
  with_items:
    - nfs-utils
    - python36
    - tar
    - zip


- name: Install Required PIP Modules
  pip:
    name: ['ansible', 'ansible-tower-cli']
  when: "'ssc__control' in group_names"
